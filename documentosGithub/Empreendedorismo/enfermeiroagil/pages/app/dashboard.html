<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - Enfermeiro Ágil</title>
    
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Montserrat:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- CSS Custom -->
    <link rel="stylesheet" href="../../../css/main.css">
    
    <!-- CSS Dashboard -->
    <style>
        .dashboard-header {
            background: linear-gradient(135deg, #1a73e8, #0d47a1);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
        }
        
        .stat-card {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
            height: 100%;
        }
        
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0,0,0,0.1);
        }
        
        .stat-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }
        
        .stat-number {
            font-size: 2rem;
            font-weight: 700;
            line-height: 1;
            margin-bottom: 0.5rem;
        }
        
        .stat-label {
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .quick-action {
            background: white;
            border-radius: 12px;
            padding: 1.5rem;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            height: 100%;
        }
        
        .quick-action:hover {
            border-color: #1a73e8;
            transform: translateY(-3px);
        }
        
        .quick-action-icon {
            width: 70px;
            height: 70px;
            background: #e8f0fe;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.75rem;
            color: #1a73e8;
            margin: 0 auto 1rem;
        }
        
        .patient-card {
            background: white;
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 1rem;
            border-left: 4px solid;
            transition: all 0.3s ease;
        }
        
        .patient-card:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .priority-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 50px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .priority-high {
            background: #ffebee;
            color: #f44336;
            border-left-color: #f44336;
        }
        
        .priority-medium {
            background: #fff3e0;
            color: #ff9800;
            border-left-color: #ff9800;
        }
        
        .priority-low {
            background: #e8f5e9;
            color: #4caf50;
            border-left-color: #4caf50;
        }
    </style>
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="../../../../public/favicon.ico">
</head>
<body>
    
    <!-- Global Loading -->
    <div id="global-loader" class="position-fixed top-0 start-0 w-100 h-100 bg-white d-flex align-items-center justify-content-center" style="z-index: 9999; display: none;">
        <div class="text-center">
            <div class="loading-spinner mb-3"></div>
            <p class="text-muted">Carregando...</p>
        </div>
    </div>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm fixed-top">
        <div class="container-custom">
            <!-- Logo -->
            <a class="navbar-brand d-flex align-items-center" href="dashboard.html">
                <img src="../../../../public/EnfermeiroAgil.png" alt="Enfermeiro Ágil" height="40" class="me-2">
                <span class="fw-bold d-none d-md-inline">Enfermeiro<span class="text-primary">Ágil</span></span>
            </a>
            
            <!-- Mobile Toggle -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain">
                <span class="navbar-toggler-icon"></span>
            </button>
            
            <!-- Menu -->
            <div class="collapse navbar-collapse" id="navbarMain">
                <ul class="navbar-nav ms-auto align-items-center">
                    <!-- Notificações -->
                    <li class="nav-item dropdown me-3">
                        <a class="nav-link position-relative" href="#" role="button" data-bs-toggle="dropdown">
                            <i class="bi bi-bell fs-5"></i>
                            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger" id="notification-count">
                                0
                            </span>
                        </a>
                        <div class="dropdown-menu dropdown-menu-end p-0" style="min-width: 300px;">
                            <div class="card-custom">
                                <div class="card-custom-header">
                                    <h6 class="mb-0">Notificações</h6>
                                </div>
                                <div class="card-custom-body p-0">
                                    <div class="list-group list-group-flush" id="notifications-list">
                                        <div class="list-group-item text-center py-4">
                                            <div class="text-muted">Nenhuma notificação</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </li>
                    
                    <!-- Perfil do Usuário -->
                    <li class="nav-item dropdown">
                        <a class="nav-link d-flex align-items-center" href="#" role="button" data-bs-toggle="dropdown">
                            <div class="d-flex align-items-center">
                                <div class="flex-shrink-0">
                                    <div class="rounded-circle bg-primary d-flex align-items-center justify-content-center text-white" style="width: 40px; height: 40px;">
                                        <i class="bi bi-person"></i>
                                    </div>
                                </div>
                                <div class="flex-grow-1 ms-2">
                                    <div class="fw-semibold user-name">Carregando...</div>
                                    <div class="text-muted small user-role"></div>
                                </div>
                            </div>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end">
                            <li>
                                <a class="dropdown-item" href="settings/index.html">
                                    <i class="bi bi-person me-2"></i>Meu Perfil
                                </a>
                            </li>
                            <li>
                                <a class="dropdown-item" href="settings/index.html">
                                    <i class="bi bi-gear me-2"></i>Configurações
                                </a>
                            </li>
                            <li><hr class="dropdown-divider"></li>
                            <li>
                                <a class="dropdown-item logout-btn" href="#">
                                    <i class="bi bi-box-arrow-right me-2"></i>Sair
                                </a>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Sidebar -->
    <div class="container-fluid" style="margin-top: 80px;">
        <div class="row">
            <!-- Sidebar -->
            <nav class="col-md-3 col-lg-2 d-md-block bg-light sidebar" style="min-height: calc(100vh - 80px);">
                <div class="position-sticky pt-3">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" href="dashboard.html">
                                <i class="bi bi-speedometer2 me-2"></i>
                                Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="patients/index.html">
                                <i class="bi bi-people me-2"></i>
                                Pacientes
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="medications/index.html">
                                <i class="bi bi-capsule me-2"></i>
                                Medicamentos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="ai-assistant/index.html">
                                <i class="bi bi-robot me-2"></i>
                                Assistente IA
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="protocols/index.html">
                                <i class="bi bi-book me-2"></i>
                                Protocolos
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="templates/index.html">
                                <i class="bi bi-file-earmark-text me-2"></i>
                                Templates
                            </a>
                        </li>
                        <li class="nav-item mt-4">
                            <a class="nav-link" href="settings/index.html">
                                <i class="bi bi-gear me-2"></i>
                                Configurações
                            </a>
                        </li>
                    </ul>
                    
                    <!-- Status do plano -->
                    <div class="card-custom mt-4 mx-2">
                        <div class="card-custom-body">
                            <h6 class="card-title">Seu Plano</h6>
                            <div class="d-flex align-items-center mb-2">
                                <span class="badge bg-success me-2">Básico</span>
                                <small class="text-muted">Ativo</small>
                            </div>
                            <div class="progress mb-2" style="height: 6px;">
                                <div class="progress-bar" role="progressbar" style="width: 25%;"></div>
                            </div>
                            <small class="text-muted">12/50 pacientes</small>
                        </div>
                    </div>
                </div>
            </nav>

            <!-- Main Content -->
            <main class="col-md-9 ms-sm-auto col-lg-10 px-md-4">
                <!-- Header -->
                <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
                    <div>
                        <h1 class="h2">Dashboard</h1>
                        <p class="text-muted mb-0" id="welcome-message">Bem-vindo de volta!</p>
                    </div>
                    <div class="btn-toolbar mb-2 mb-md-0">
                        <button class="btn btn-custom btn-custom-primary" data-bs-toggle="modal" data-bs-target="#newPatientModal">
                            <i class="bi bi-plus-circle me-2"></i>Novo Paciente
                        </button>
                    </div>
                </div>

                <!-- Alertas -->
                <div id="dashboard-alert" class="alert-custom alert-custom-info mb-4 d-none"></div>

                <!-- Estatísticas -->
                <div class="row mb-4">
                    <div class="col-md-3 col-sm-6 mb-4">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: #e8f0fe; color: #1a73e8;">
                                <i class="bi bi-people"></i>
                            </div>
                            <div class="stat-number" id="total-patients">0</div>
                            <div class="stat-label">Pacientes Ativos</div>
                        </div>
                    </div>
                    
                    <div class="col-md-3 col-sm-6 mb-4">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: #e8f5e9; color: #4caf50;">
                                <i class="bi bi-file-earmark-text"></i>
                            </div>
                            <div class="stat-number" id="today-notes">0</div>
                            <div class="stat-label">Evoluções Hoje</div>
                        </div>
                    </div>
                    
                    <div class="col-md-3 col-sm-6 mb-4">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: #fff3e0; color: #ff9800;">
                                <i class="bi bi-exclamation-triangle"></i>
                            </div>
                            <div class="stat-number" id="high-priority">0</div>
                            <div class="stat-label">Alta Prioridade</div>
                        </div>
                    </div>
                    
                    <div class="col-md-3 col-sm-6 mb-4">
                        <div class="stat-card">
                            <div class="stat-icon" style="background: #f3e5f5; color: #9c27b0;">
                                <i class="bi bi-clock-history"></i>
                            </div>
                            <div class="stat-number" id="time-saved">0h</div>
                            <div class="stat-label">Tempo Economizado</div>
                        </div>
                    </div>
                </div>

                <!-- Ações Rápidas -->
                <div class="row mb-4">
                    <div class="col-12">
                        <h4 class="mb-3">Ações Rápidas</h4>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="quick-action" onclick="window.location.href='patients/new.html'">
                            <div class="quick-action-icon">
                                <i class="bi bi-person-plus"></i>
                            </div>
                            <h6>Novo Paciente</h6>
                            <p class="text-muted small">Cadastre um novo paciente</p>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="quick-action" onclick="window.location.href='medications/search.html'">
                            <div class="quick-action-icon">
                                <i class="bi bi-search"></i>
                            </div>
                            <h6>Buscar Medicamento</h6>
                            <p class="text-muted small">Consulte bulas e informações</p>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="quick-action" onclick="window.location.href='ai-assistant/index.html'">
                            <div class="quick-action-icon">
                                <i class="bi bi-robot"></i>
                            </div>
                            <h6>Assistente IA</h6>
                            <p class="text-muted small">Tire suas dúvidas técnicas</p>
                        </div>
                    </div>
                    <div class="col-md-3 col-sm-6 mb-3">
                        <div class="quick-action" onclick="window.location.href='protocols/index.html'">
                            <div class="quick-action-icon">
                                <i class="bi bi-book"></i>
                            </div>
                            <h6>Protocolos</h6>
                            <p class="text-muted small">Acesse boas práticas</p>
                        </div>
                    </div>
                </div>

                <!-- Pacientes Recentes -->
                <div class="row">
                    <div class="col-lg-8 mb-4">
                        <div class="card-custom">
                            <div class="card-custom-header d-flex justify-content-between align-items-center">
                                <h5 class="mb-0">Pacientes Recentes</h5>
                                <a href="patients/index.html" class="text-primary text-decoration-none">Ver todos</a>
                            </div>
                            <div class="card-custom-body">
                                <div id="recent-patients">
                                    <div class="text-center py-4">
                                        <div class="loading-spinner"></div>
                                        <p class="text-muted mt-2">Carregando pacientes...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Atividades Recentes -->
                    <div class="col-lg-4 mb-4">
                        <div class="card-custom">
                            <div class="card-custom-header">
                                <h5 class="mb-0">Atividades Recentes</h5>
                            </div>
                            <div class="card-custom-body">
                                <div id="recent-activities">
                                    <div class="text-center py-4">
                                        <div class="loading-spinner"></div>
                                        <p class="text-muted mt-2">Carregando atividades...</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Modal: Novo Paciente -->
    <div class="modal fade" id="newPatientModal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Novo Paciente</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                </div>
                <div class="modal-body">
                    <form id="new-patient-form">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="patient-name" class="form-label">Nome Completo *</label>
                                <input type="text" class="form-control" id="patient-name" required>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="patient-bed" class="form-label">Leito</label>
                                <input type="text" class="form-control" id="patient-bed">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-4 mb-3">
                                <label for="patient-priority" class="form-label">Prioridade</label>
                                <select class="form-select" id="patient-priority">
                                    <option value="baixa">Baixa</option>
                                    <option value="media">Média</option>
                                    <option value="alta">Alta</option>
                                </select>
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="patient-age" class="form-label">Idade</label>
                                <input type="number" class="form-control" id="patient-age" min="0" max="150">
                            </div>
                            <div class="col-md-4 mb-3">
                                <label for="patient-gender" class="form-label">Sexo</label>
                                <select class="form-select" id="patient-gender">
                                    <option value="">Selecione</option>
                                    <option value="M">Masculino</option>
                                    <option value="F">Feminino</option>
                                    <option value="O">Outro</option>
                                </select>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label for="patient-diagnosis" class="form-label">Diagnóstico Principal</label>
                            <textarea class="form-control" id="patient-diagnosis" rows="2"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="patient-allergies" class="form-label">Alergias (separadas por vírgula)</label>
                            <input type="text" class="form-control" id="patient-allergies" placeholder="Ex: Penicilina, Dipirona">
                        </div>
                        <div class="mb-3">
                            <label for="patient-notes" class="form-label">Observações</label>
                            <textarea class="form-control" id="patient-notes" rows="3"></textarea>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" id="save-patient-btn">Salvar Paciente</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Módulos do App -->
    <script type="module">
        import authService from '../../../js/modules/auth.js';
        import patientService from '../../../js/modules/patients.js';
        import { UTILS } from '../../../js/config/constants.js';
        
        // Inicializar
        document.addEventListener('DOMContentLoaded', async function() {
            await initDashboard();
        });
        
        async function initDashboard() {
            try {
                // Verificar autenticação
                if (!authService.isAuthenticated()) {
                    window.location.href = '../../auth/login.html';
                    return;
                }
                
                // Carregar dados do usuário
                await loadUserData();
                
                // Carregar estatísticas
                await loadStatistics();
                
                // Carregar pacientes recentes
                await loadRecentPatients();
                
                // Configurar eventos
                setupEventListeners();
                
            } catch (error) {
                console.error('Erro ao inicializar dashboard:', error);
                showError('Erro ao carregar dashboard. Tente novamente.');
            }
        }
        
        async function loadUserData() {
            const user = authService.getUser();
            const profile = authService.getUserProfile();
            
            // Atualizar UI
            document.querySelectorAll('.user-name').forEach(el => {
                el.textContent = profile?.full_name || user?.email?.split('@')[0] || 'Usuário';
            });
            
            document.querySelectorAll('.user-role').forEach(el => {
                if (profile?.role) {
                    const roleNames = {
                        'enfermeiro': 'Enfermeiro(a)',
                        'tecnico': 'Técnico(a)',
                        'estudante': 'Estudante',
                        'admin': 'Administrador'
                    };
                    el.textContent = roleNames[profile.role] || profile.role;
                }
            });
            
            // Mensagem de boas-vindas
            const welcomeMessage = document.getElementById('welcome-message');
            const hour = new Date().getHours();
            let greeting = 'Boa noite';
            
            if (hour < 12) greeting = 'Bom dia';
            else if (hour < 18) greeting = 'Boa tarde';
            
            welcomeMessage.textContent = `${greeting}, ${profile?.full_name?.split(' ')[0] || 'profissional'}!`;
        }
        
        async function loadStatistics() {
            try {
                const result = await patientService.getStatistics();
                
                if (result.success) {
                    const stats = result.data;
                    
                    // Atualizar estatísticas
                    document.getElementById('total-patients').textContent = stats.totalPatients;
                    document.getElementById('high-priority').textContent = stats.priorityStats.alta;
                    
                    // Calcular tempo economizado (estimativa: 10min por evolução)
                    const timeSaved = Math.floor(stats.recentNotes * 10 / 60);
                    document.getElementById('time-saved').textContent = `${timeSaved}h`;
                    
                    // Para "Evoluções Hoje", precisaríamos de uma função específica
                    // Por enquanto, usaremos as dos últimos 7 dias
                    document.getElementById('today-notes').textContent = stats.recentNotes;
                    
                } else {
                    throw new Error(result.error);
                }
                
            } catch (error) {
                console.error('Erro ao carregar estatísticas:', error);
            }
        }
        
        async function loadRecentPatients() {
            try {
                const result = await patientService.getPatients({}, 1, 5);
                
                if (result.success) {
                    const container = document.getElementById('recent-patients');
                    
                    if (result.data.length === 0) {
                        container.innerHTML = `
                            <div class="text-center py-4">
                                <i class="bi bi-people text-muted" style="font-size: 3rem;"></i>
                                <p class="text-muted mt-2">Nenhum paciente cadastrado ainda</p>
                                <button class="btn btn-primary mt-2" data-bs-toggle="modal" data-bs-target="#newPatientModal">
                                    <i class="bi bi-plus-circle me-2"></i>Cadastrar Primeiro Paciente
                                </button>
                            </div>
                        `;
                        return;
                    }
                    
                    let html = '';
                    result.data.forEach(patient => {
                        const priorityClass = `priority-${patient.priority}`;
                        const formattedDate = UTILS.formatDate(patient.created_at);
                        
                        html += `
                            <div class="patient-card ${priorityClass}" onclick="viewPatient('${patient.id}')">
                                <div class="d-flex justify-content-between align-items-start mb-2">
                                    <div>
                                        <h6 class="mb-1">${patient.name}</h6>
                                        <div class="d-flex align-items-center">
                                            <span class="priority-badge ${priorityClass} me-2">
                                                ${UTILS.getPriorityText(patient.priority)}
                                            </span>
                                            <small class="text-muted">
                                                <i class="bi bi-hospital me-1"></i>${patient.bed_number || 'Sem leito'}
                                            </small>
                                        </div>
                                    </div>
                                    <div class="text-end">
                                        <small class="text-muted">${formattedDate}</small>
                                    </div>
                                </div>
                                ${patient.main_diagnosis ? `
                                    <p class="text-muted small mb-0">
                                        <i class="bi bi-clipboard2-pulse me-1"></i>
                                        ${patient.main_diagnosis}
                                    </p>
                                ` : ''}
                            </div>
                        `;
                    });
                    
                    container.innerHTML = html;
                    
                } else {
                    throw new Error(result.error);
                }
                
            } catch (error) {
                console.error('Erro ao carregar pacientes:', error);
                document.getElementById('recent-patients').innerHTML = `
                    <div class="alert alert-danger">
                        Erro ao carregar pacientes: ${error.message}
                    </div>
                `;
            }
        }
        
        function setupEventListeners() {
            // Logout
            document.querySelectorAll('.logout-btn').forEach(btn => {
                btn.addEventListener('click', async (e) => {
                    e.preventDefault();
                    await authService.logout();
                });
            });
            
            // Salvar paciente
            document.getElementById('save-patient-btn').addEventListener('click', async () => {
                await saveNewPatient();
            });
            
            // Fechar modal ao salvar
            const newPatientModal = document.getElementById('newPatientModal');
            if (newPatientModal) {
                newPatientModal.addEventListener('hidden.bs.modal', function() {
                    document.getElementById('new-patient-form').reset();
                });
            }
        }
        
        async function saveNewPatient() {
            try {
                const patientData = {
                    name: document.getElementById('patient-name').value,
                    bed_number: document.getElementById('patient-bed').value,
                    priority: document.getElementById('patient-priority').value,
                    age: parseInt(document.getElementById('patient-age').value) || null,
                    gender: document.getElementById('patient-gender').value,
                    main_diagnosis: document.getElementById('patient-diagnosis').value,
                    allergies: document.getElementById('patient-allergies').value
                        .split(',')
                        .map(a => a.trim())
                        .filter(a => a),
                    notes: document.getElementById('patient-notes').value
                };
                
                // Validação
                if (!patientData.name.trim()) {
                    showError('O nome do paciente é obrigatório.');
                    return;
                }
                
                // Salvar
                authService.showLoading();
                const result = await patientService.createPatient(patientData);
                authService.hideLoading();
                
                if (result.success) {
                    // Fechar modal
                    const modal = bootstrap.Modal.getInstance(document.getElementById('newPatientModal'));
                    modal.hide();
                    
                    // Mostrar mensagem de sucesso
                    showSuccess('Paciente cadastrado com sucesso!');
                    
                    // Recarregar lista de pacientes
                    await loadRecentPatients();
                    await loadStatistics();
                    
                } else {
                    showError(result.error);
                }
                
            } catch (error) {
                console.error('Erro ao salvar paciente:', error);
                showError('Erro ao salvar paciente. Tente novamente.');
            }
        }
        
        function viewPatient(patientId) {
            window.location.href = `patients/view.html?id=${patientId}`;
        }
        
        function showSuccess(message) {
            const alert = document.getElementById('dashboard-alert');
            alert.textContent = message;
            alert.className = 'alert-custom alert-custom-success mb-4';
            alert.classList.remove('d-none');
            
            setTimeout(() => {
                alert.classList.add('d-none');
            }, 3000);
        }
        
        function showError(message) {
            const alert = document.getElementById('dashboard-alert');
            alert.textContent = message;
            alert.className = 'alert-custom alert-custom-danger mb-4';
            alert.classList.remove('d-none');
            
            setTimeout(() => {
                alert.classList.add('d-none');
            }, 5000);
        }
        
        // Tornar funções disponíveis globalmente para onclick
        window.viewPatient = viewPatient;
        
    </script>
</body>
</html>