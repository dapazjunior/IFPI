<div class="modal fade" id="editComplaintModal" tabindex="-1" aria-labelledby="editComplaintModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-lg modal-dialog-scrollable">
    <div class="modal-content">
      <div class="modal-header bg-warning text-dark">
        <h5 class="modal-title"><i class="bi bi-pencil-square"></i> Gerenciar Denúncia</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <ul class="nav nav-tabs mb-3" id="complaintTabs" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="details-tab" data-bs-toggle="tab" data-bs-target="#details" type="button">
              <i class="bi bi-card-text"></i> Detalhes
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="attachments-tab" data-bs-toggle="tab" data-bs-target="#attachments" type="button">
              <i class="bi bi-paperclip"></i> Anexos
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="comments-tab" data-bs-toggle="tab" data-bs-target="#comments" type="button">
              <i class="bi bi-chat-text"></i> Comentários
            </button>
          </li>
        </ul>
        
        <div class="tab-content" id="complaintTabsContent">
          <!-- Aba: Detalhes -->
          <div class="tab-pane fade show active" id="details" role="tabpanel">
            <form id="editComplaintForm">
              <input type="hidden" id="editComplaintId">
              
              <div class="row g-3">
                <div class="col-md-8">
                  <label class="form-label fw-semibold">Título *</label>
                  <input type="text" id="editComplaintTitle" class="form-control" required>
                </div>
                <div class="col-md-4">
                  <label class="form-label fw-semibold">Prioridade</label>
                  <select id="editComplaintPriority" class="form-select">
                    <option value="normal">Normal</option>
                    <option value="baixa">Baixa</option>
                    <option value="alta">Alta</option>
                    <option value="urgente">Urgente</option>
                  </select>
                </div>
                
                <div class="col-12">
                  <label class="form-label fw-semibold">Descrição *</label>
                  <textarea id="editComplaintDescription" class="form-control" rows="4" required></textarea>
                </div>
                
                <div class="col-md-6">
                  <label class="form-label fw-semibold">Localização *</label>
                  <input type="text" id="editComplaintLocation" class="form-control" required>
                </div>
                
                <div class="col-md-6">
                  <label class="form-label fw-semibold">Prazo</label>
                  <input type="date" id="editComplaintDueDate" class="form-control">
                </div>
                
                <div class="col-md-6">
                  <label class="form-label fw-semibold">Status</label>
                  <select id="editComplaintStatus" class="form-select" required>
                    <option value="pendente">Pendente</option>
                    <option value="em_andamento">Em Andamento</option>
                    <option value="concluido">Concluído</option>
                    <option value="cancelado">Cancelado</option>
                  </select>
                </div>
                
                <div class="col-md-6">
                  <label class="form-label fw-semibold">Atribuir para</label>
                  <select id="editComplaintAssignee" class="form-select">
                    <option value="">-- Não atribuído --</option>
                  </select>
                </div>
                
                <div class="col-12" id="resolutionSection" style="display: none;">
                  <label class="form-label fw-semibold">Detalhes da Resolução</label>
                  <textarea id="editComplaintResolution" class="form-control" rows="3" placeholder="Descreva como a denúncia foi resolvida..."></textarea>
                </div>
              </div>
            </form>
          </div>
          
          <!-- Aba: Anexos -->
          <div class="tab-pane fade" id="attachments" role="tabpanel">
            <div class="mb-3">
              <h6><i class="bi bi-cloud-upload"></i> Adicionar Anexos</h6>
              <div class="card border-dashed">
                <div class="card-body text-center">
                  <div class="mb-3">
                    <i class="bi bi-cloud-arrow-up fs-1 text-muted"></i>
                  </div>
                  <input type="file" id="complaintAttachmentInput" class="form-control" multiple accept="image/*,.pdf,.doc,.docx,.xls,.xlsx">
                  <small class="text-muted d-block mt-2">Arraste arquivos ou clique para selecionar</small>
                  <small class="text-muted">Formatos suportados: JPG, PNG, PDF, DOC, XLS (Máx: 10MB)</small>
                </div>
              </div>
              
              <div id="attachmentProgress" class="mt-3" style="display: none;">
                <div class="progress">
                  <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" style="width: 0%"></div>
                </div>
                <small class="text-muted mt-1 d-block text-center">Enviando arquivos...</small>
              </div>
            </div>
            
            <hr>
            
            <div>
              <h6><i class="bi bi-files"></i> Anexos</h6>
              <div id="attachmentsList" class="list-group">
                <div class="text-center py-4 text-muted">
                  <i class="bi bi-folder-x fs-1"></i>
                  <p class="mt-2">Nenhum anexo adicionado</p>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Aba: Comentários -->
          <div class="tab-pane fade" id="comments" role="tabpanel">
            <div class="mb-3">
              <h6><i class="bi bi-chat-left-text"></i> Adicionar Comentário</h6>
              <div class="mb-3">
                <textarea id="newCommentText" class="form-control" rows="3" placeholder="Digite seu comentário ou resposta..."></textarea>
              </div>
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <input type="file" id="commentAttachmentInput" class="form-control form-control-sm" style="display: none;">
                  <button type="button" class="btn btn-sm btn-outline-secondary" onclick="document.getElementById('commentAttachmentInput').click()">
                    <i class="bi bi-paperclip"></i> Anexar arquivo
                  </button>
                  <small id="commentAttachmentName" class="text-muted ms-2" style="display: none;"></small>
                </div>
                <button type="button" id="addCommentBtn" class="btn btn-primary">
                  <i class="bi bi-send"></i> Enviar
                </button>
              </div>
            </div>
            
            <hr>
            
            <div>
              <h6><i class="bi bi-chat-history"></i> Histórico de Comentários</h6>
              <div id="commentsList" class="timeline">
                <div class="text-center py-4 text-muted">
                  <i class="bi bi-chat-left fs-1"></i>
                  <p class="mt-2">Nenhum comentário ainda</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Fechar</button>
        <button type="submit" form="editComplaintForm" class="btn btn-warning">
          <i class="bi bi-save"></i> Salvar Alterações
        </button>
      </div>
    </div>
  </div>
</div>